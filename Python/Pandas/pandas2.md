# 데이터 선택  
## Getitem[]  
데이터프레임에서 레이블 하나를 주면, 열을 선택하여 시리즈를 내놓은다.
```python
df["A"]
```
```
2013-01-01    0.469112
2013-01-02    1.212112
2013-01-03   -0.861849
2013-01-04    0.721555
2013-01-05   -0.424972
2013-01-06   -0.673690
Freq: D, Name: A, dtype: float64
```
데이터프레임에서 `:`를 이용하면 일치하는 행을 전달한다
```python
df[0:3]
```
```
                   A         B         C         D
2013-01-01  0.469112 -0.282863 -1.509059 -1.135632
2013-01-02  1.212112 -0.173215  0.119209 -1.044236
2013-01-03 -0.861849 -2.104569 -0.494929  1.071804
```
```python
df["20130102":"20130104"]
```
```
                   A         B         C         D
2013-01-02  1.212112 -0.173215  0.119209 -1.044236
2013-01-03 -0.861849 -2.104569 -0.494929  1.071804
2013-01-04  0.721555 -0.706771 -1.039575  0.271860
```  

## 레이블로 선택
`DataFrame.loc()` 이나 `DataFrame.at()`을 사용하여 일치하는 레이블을 선택할 수 있다.
```python
df.loc[dates[0]]
```
```
A    0.469112
B   -0.282863
C   -1.509059
D   -1.135632
Name: 2013-01-01 00:00:00, dtype: float64
```
`:`을 사용해서 모든 행을 선택할 수 있다.
```python
df.loc[:, ["A", "B"]]
```
```
                   A         B
2013-01-02  1.212112 -0.173215
2013-01-03 -0.861849 -2.104569
2013-01-04  0.721555 -0.706771
```
한개의 행과 한개의 열을 선택하면 그 위치에 있는 데이터를 리턴한다.
```python
df.loc[dates[0], "A"]
```
```
 0.4691122999071863
```
## 위치로 선택
`DataFrame.iloc()` 이나 `DataFrame.iat()`을 사용해서 념겨준 정수의 인덱스를 선택할 수 있다.
```python
df.iloc[3]
```
```
A    0.721555
B   -0.706771
C   -1.039575
D    0.271860
Name: 2013-01-04 00:00:00, dtype: float64
```
인덱스 슬라이싱은 Numpy/Python과 비슷하게 작동한다
```python
df.iloc[3:5, 0:2]
```
```
                   A         B
2013-01-04  0.721555 -0.706771
2013-01-05 -0.424972  0.567020
```
인덱스의 리스트를 넘겨줄 수도 있다.
```python
df.iloc[[1, 2, 4], [0, 2]]
```
```
                   A         C
2013-01-02  1.212112  0.119209
2013-01-03 -0.861849 -0.494929
2013-01-05 -0.424972  0.276232
```
`DataFrame.loc()` 과 동일하게 `:`를 사용해서 전체 행이나 열을 얻을 수 있다.
```python
df.iloc[:, 1:3]
```
```
                   B         C
2013-01-01 -0.282863 -1.509059
2013-01-02 -0.173215  0.119209
2013-01-03 -2.104569 -0.494929
2013-01-04 -0.706771 -1.039575
2013-01-05  0.567020  0.276232
2013-01-06  0.113648 -1.478427
```
## 논리형 인덱싱
`df.A`가 `0`보다 큰 열을 선택할 수 있다.
```python
df[df["A"] > 0]
```
```
                   A         B         C         D
2013-01-01  0.469112 -0.282863 -1.509059 -1.135632
2013-01-02  1.212112 -0.173215  0.119209 -1.044236
2013-01-04  0.721555 -0.706771 -1.039575  0.271860
```
데이터프레임에서 논리 조건을 충족하는 값들을 선택할 수 있다.
```python
df[df > 0]
```
```
                   A         B         C         D
2013-01-01  0.469112       NaN       NaN       NaN
2013-01-02  1.212112       NaN  0.119209       NaN
2013-01-03       NaN       NaN       NaN  1.071804
2013-01-04  0.721555       NaN       NaN  0.271860
2013-01-05       NaN  0.567020  0.276232       NaN
2013-01-06       NaN  0.113648       NaN  0.524988
```
`isin()` 메소드를 사용하여 필터링 할 수 있다.
```python
df2 = df.copy()

df2["E"] = ["one", "one", "two", "three", "four", "three"]

df2
```
```
                   A         B         C         D      E
2013-01-01  0.469112 -0.282863 -1.509059 -1.135632    one
2013-01-02  1.212112 -0.173215  0.119209 -1.044236    one
2013-01-03 -0.861849 -2.104569 -0.494929  1.071804    two
2013-01-04  0.721555 -0.706771 -1.039575  0.271860  three
2013-01-05 -0.424972  0.567020  0.276232 -1.087401   four
2013-01-06 -0.673690  0.113648 -1.478427  0.524988  three
```
```python
df2[df2["E"].isin(["two", "four"])]
```
```
                   A         B         C         D     E
2013-01-03 -0.861849 -2.104569 -0.494929  1.071804   two
2013-01-05 -0.424972  0.567020  0.276232 -1.087401  four
```
# 결측 데이터
Numpy 자료형에서 `np.nan`은 결측 데이터를 나타낸다. 결측 데이터는 기본적으로 계산에 포함되지 않는다.  
`reindex()`를 통해 행 또는 열에 있는 인덱스를 변경/추가/제거 할 수 있다. 그리고 데이터의 복사본을 리턴한다.
```python
df1 = df.reindex(index=dates[0:4], columns=list(df.columns) + ["E"])

df1.loc[dates[0] : dates[1], "E"] = 1

df1
```
```
                   A         B         C    D    F    E
2013-01-01  0.000000  0.000000 -1.509059  5.0  NaN  1.0
2013-01-02  1.212112 -0.173215  0.119209  5.0  1.0  1.0
2013-01-03 -0.861849 -2.104569 -0.494929  5.0  2.0  NaN
2013-01-04  0.721555 -0.706771 -1.039575  5.0  3.0  NaN
```
`DataFrame.dropna()`는 결측 데이터가 있는 모든 행을 제거한다.
```python
df1.dropna(how="any")
```
```
                   A         B         C    D    F    E
2013-01-02  1.212112 -0.173215  0.119209  5.0  1.0  1.0
```
`DataFrame.fillna()`는 결측치를 채워넣는다
```python
df1.fillna(value=5)
``` 
```
                   A         B         C    D    F    E
2013-01-01  0.000000  0.000000 -1.509059  5.0  5.0  1.0
2013-01-02  1.212112 -0.173215  0.119209  5.0  1.0  1.0
2013-01-03 -0.861849 -2.104569 -0.494929  5.0  2.0  5.0
2013-01-04  0.721555 -0.706771 -1.039575  5.0  3.0  5.0
```
`isna()`는 값이 `nan`인지에 대해 논리형의 데이터를 얻는다
```python
pd.isna(df1)
```
```
                A      B      C      D      F      E
2013-01-01  False  False  False  False   True  False
2013-01-02  False  False  False  False  False  False
2013-01-03  False  False  False  False  False   True
2013-01-04  False  False  False  False  False   True
```